<!DOCTYPE html>
<html>
<head>
  <title>Discussion Forum</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
body {
  margin: 0%;
  height: 100%;
  font-family: Arial, sans-serif;
  background-color: #bbbbbba4;
}

.home-content {
    flex: 1;
    width: 100%;
    display: flex;
    align-items: center;
    flex-direction: column;
  }

.nav-bar {
    display: flex;
    position: fixed;
    align-items: center;
    padding-top: var(--dl-space-space-threeunits);
    padding-bottom: var(--dl-space-space-threeunits);
    justify-content: space-between;
    top: 0px;
    width:100%; 
    max-width: 1440px;
    background-color: white;
    z-index: 100;
  }
  
  .nav  {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--dl-space-space-twounits);
    transition: 0.3s;
  }
  
  .nav a, button {
    gap: var(--dl-space-space-threeunits);
    display: flex;
    align-items: center;
    flex-direction: row;
    justify-content: center;
    color: rgb(0, 0, 0);
    text-decoration: none;
    font-size: 16px;
  }
  
  .nav button {
    background-color: white;
    border-radius: 3px;
    border: 1.5px solid;
    padding: 7px;
    margin-right: 40px;
    text-align: center;
    width: 100px;
    cursor: pointer;
  }
  
  .logonav {
      position: relative;
      top: 7px;
      left: 2%;
      color: rgb(0, 0, 0);
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: row;
      font-size: 22px;
  }
  
  .logonav h3 {
    margin-top: 2px;
    margin-left: 5px;
  }
  
  .logonav img {
      width: 40px; 
      border-radius: 50px;
  }
  
  .nav a {
    padding: 14px 50px 18px 10px;  
  }
  
  .new-post-container {
    background-color: #F8F0E9;
    margin-top: -3%;
    display: flex;
    flex-direction: row;
    padding-bottom: var(--dl-space-space-threeunits);
    justify-content: center;
    height: 800px;
  }

    form {
      position: relative;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
      margin-top: 200px;
      width: 30%;
      height: 300px;
      padding: 3% 4% 4% 4%;
      background-color: white;
    }

    form h2 {
      color: #392881;
      font-size: 25px;
    }
    
    label {
      display: block;
      margin-bottom: 2px;
      padding: 4px
    }
    
   #content-title {
      padding-top: 4%;
   }

    input[type="text"],
    textarea {
      width: 97%;
      height: 10px;
      padding: 10px;
      border: 1px solid black;
      resize: none;
    }
    
  textarea {
    height: 60px;
  }

    button[type="submit"] {
      background-color: #FFFBA1;
      color: black;
      font-weight: bold;
      padding: 10px 30px;
      border: none;
      border-radius: 25px;
      box-shadow: 0px 2px 2px 0px rgba(0,0,0,0.2);
      cursor: pointer;
      width: 60px;
      height: 30px;
      font-size: 12px;
      padding: 0px 10px;
    }

    button[type="reset"] {
      background-color:#d7faf7;
      color: black;
      font-weight: bold;
      padding: 10px 30px;
      border: none;
      border-radius: 25px;
      box-shadow: 0px 2px 2px 0px rgba(0,0,0,0.2);
      cursor: pointer;
      margin-right: 2%;
      width: 60px;
      height: 30px;
      font-size: 12px;
      padding: 0px 10px;

    }
    
    button[type="submit"]:hover, [type="reset"]:hover {
      background-image: linear-gradient(rgb(0 0 0/20%) 0 0);
      color: white;
    }

    .formbtns {
      display: flex;
      flex-direction:row-reverse;
      margin: 3% 0% 0% 5%;
    }
    
   #post-list {
    gap: var(--dl-space-space-fourunits);
    background-color: #fafafa;
    padding: 5% 15% 20% 15%;
    margin-top: -3%;
    padding-top: var(--dl-space-space-threeunits);
    padding-left: var(--dl-space-space-fiveunits);
    padding-right: var(--dl-space-space-fiveunits);
    padding-bottom: var(--dl-space-space-threeunits);
    text-align:start;
    justify-content: start;
    height: 100%;
   }

    #post-list h2 {
      font-size: 35px;
      margin-left: 70px;
    }
    article {
      margin-left: 50px;
      margin-right: 50px;
      margin-bottom: 20px;
      border: 1px solid black;
      border-radius: 4px;
      padding: 10px;
      background:#dadada;
      color: black;
      text-decoration: ;
    }
    

button.reply-button {
    margin-left: 10px;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    }
  
button.like-button {
  margin-left: 10px;
  border: none;
  padding: 5px 10px;
  border-radius: 5px;
  cursor: pointer;
}

.delete-button {
  background-color: red;
  color: white;
  padding: 5px 10px;
  border-radius: 5px;
  border: none;
  cursor: pointer;
  margin-left: 10px;
}
  
.divButton {
  display: flex;
  flex-direction: row;
}

body > footer {
  position: sticky;
  top: 100vh;
}

footer {
    background-color: #021d1fe1;
    color: white;
    display: flex;
  }
  
  .youngcapabletag {
    flex-grow: 100;
    text-align: left;
    margin-top: 1%; 
    margin-left: 10px;
    font-size: 15px;
  }
  
  .socials {
      flex-grow: 2;
      margin-top: 1.5%;
  }
  
  .socials a {
      margin: 7;
  }
    </style>
</head>
<body>
  <div class="home-content">
    <div class="nav-bar">
        <div class = "logonav">
          <a href="Home.html"><img src="Media/Young.png" alt="logo" /></a>
          <h3>Y&C</h3>
        </div>
        <div class = "nav">
            <a href="OppBoard.html">Opportunity Board</a>
            <a href="Entrepreneurial-hub.html">Learning Hub</a>
            <button id="upload-button">Post</button>
        </div>
        </div>
   </div>
    <main>
    
    <div class="new-post-container">
      <form id="post-form">
        <h2>New Post</h2>
        <label for="post-title">Title:</label>
        <input type="text" id="post-title" name="post-title" required>
        <label id="content-title" for="post-content">Content:</label>
        <textarea id="post-content" name="post-content" required></textarea>
        <div class="formbtns">
          <button type="submit">Post</button>
          <button type="reset">Cancel</button>
        </div>
       </form>
    </div>
      <div id="post-list">
        <div>
        <h2>Discussions</h2>
        </div>
      </div>
    
    </main>
  
    <footer>
      <div class="youngcapabletag">
              <p>Â© 2023 Young and Capable. All Rights Reserved.</p>
      </div>
      <div class="socials">
           <a href="Home.html"><img src="Media/Facebook_White.svg" width="20" height="30"></a>
           <a href="Home.html"><img src="Media/Twitter_White.svg" width="20" height="30"></a>
           <a href="Home.html"><img src="Media/Instagram_White.svg" width="20" height="30"></a>
      </div>
  </footer>
    
<script>
  const postForm = document.getElementById('post-form');
  const postList = document.getElementById('post-list')
  postForm.addEventListener('submit', event => {
    event.preventDefault();
    const title = event.target.elements['post-title'].value;
    const content = event.target.elements['post-content'].value;
    const post = createPost(title, content);
    postList.appendChild(post);
    postForm.reset();
  });
  
  {
    function createPost(title, content) {
    const article = document.createElement('article');
    const titleElement = document.createElement('h2');
    const contentElement = document.createElement('p');
    const replyButton = document.createElement('button');
    const likeButton = document.createElement('button');
    const deleteButton = document.createElement('button');
  
    titleElement.textContent = title;
    contentElement.textContent = content;
    replyButton.textContent = 'Reply';
    likeButton.textContent = 'Like';
    deleteButton.textContent = 'Delete';
    likeButton.classList.add('like-button');
    deleteButton.classList.add('delete-button');
    replyButton.classList.add('reply-button');

    replyButton.addEventListener('click', () => {
      const replyForm = document.createElement('form');
      const replyLabel = document.createElement('label');
      const replyInput = document.createElement('textarea');
      const replySubmitButton = document.createElement('button');
  
      replyLabel.textContent = 'Reply:';
      replyInput.name = 'reply-content';
      replyInput.required = true;
      replySubmitButton.textContent = 'Post Reply';
  
      replyForm.appendChild(replyLabel);
      replyForm.appendChild(replyInput);
      replyForm.appendChild(replySubmitButton);
  
      replySubmitButton.addEventListener('click', () => {
        const replyContent = replyInput.value;
        const reply = createReply(replyContent);
        article.appendChild(reply);
        replyForm.remove();
      });
  
      article.appendChild(replyForm);
    });
  
    likeButton.addEventListener('click', () => {
      const postId = article.dataset.postId;
      fetch(`/posts/${postId}/like`, { method: 'POST' })
        .then(response => {
          if (response.ok) {
            response.json().then(data => {
              const likeCount = data.likeCount;
              likeButton.textContent = `Liked (${likeCount})`;
            });
          } else {
            // handle error
          }
        });
    });
  
    deleteButton.addEventListener('click', () => {
      const postId = article.dataset.postId;
      fetch(`/posts/${postId}`, { method: 'DELETE' })
        .then(response => {
          if (response.ok) {
            article.remove();
          } else {
            // handle error
          }
        });
    });
  
    article.appendChild(titleElement);
    article.appendChild(contentElement);
    article.appendChild(replyButton);
    article.appendChild(likeButton);
    article.appendChild(deleteButton);
    article.dataset.postId = Math.floor(Math.random() * 10000);
  
    return article;
  }
  
  }
  
  function createReply(content) {
    const reply = document.createElement('div');
    const replyContent = document.createElement('p');
    const deleteButton = document.createElement('button');
  
    replyContent.textContent = content;
    deleteButton.textContent = 'Delete';
    deleteButton.className = 'delete-button';
  
    deleteButton.addEventListener('click', () => {
      reply.remove();
    });
  
    reply.appendChild(replyContent);
    reply.appendChild(deleteButton);
  
    return reply;
  }
    
  
  </script>
</body>
</html>